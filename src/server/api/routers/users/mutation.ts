/****************************************************************************************************************************************************
 * * IMPORTS
 ****************************************************************************************************************************************************/

import { publicProcedure } from '@/server/trpc';
import { UsersTable } from '@/utils/tables';
import { xata } from '@/xata';
import { z } from 'zod';


/****************************************************************************************************************************************************
 * * TYPES - INTERFACES - CLASES
 ****************************************************************************************************************************************************/


/****************************************************************************************************************************************************
 * * DECLARATIONS
 ****************************************************************************************************************************************************/


/****************************************************************************************************************************************************
 * * FUNCTIONS
 ****************************************************************************************************************************************************/


/****************************************************************************************************************************************************
 * * EXPORTS
 ****************************************************************************************************************************************************/
export const setConfirmation = publicProcedure
  .input(z.object({
    id: z.string(),
    attendance: z.string()
  }))
  .mutation(async({ input }) => {
    const { attendance, id } = input
    return await xata.db[UsersTable].update(id, { attendance })
  })
